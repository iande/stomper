<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: Stomper::OpenUriInterface</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (O)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Stomper.html" title="Stomper (module)">Stomper</a></span></span>
     &raquo; 
    <span class="title">OpenUriInterface</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Stomper::OpenUriInterface
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/stomper/open_uri_interface.rb</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This is the tricky one.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first-instance_method" title="#first (instance method)">- (Object) <strong>first</strong>(n = 1) </a>
    

    
      (also: #get, #gets, #read)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(msg, headers = {}) </a>
    

    
      (also: #puts)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write-instance_method" title="#write (instance method)">- (Object) <strong>write</strong>(msg, headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="each-instance_method">
  
    - (<tt>Object</tt>) <strong>each</strong>(&amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This is the tricky one. The subscriber interface is not going to work here,
because it is built for an entirely different use case (threaded receiving)
This interface, by contrast, is blocking&#8230; fudge.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/open_uri_interface.rb', line 28</span>

<span class='def def kw'>def</span> <span class='each identifier id'>each</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='subscription identifier id'>subscription</span> <span class='assign token'>=</span> <span class='subscribe identifier id'>subscribe</span><span class='lparen token'>(</span><span class='default_destination identifier id'>default_destination</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='m identifier id'>m</span> <span class='rbrace token'>}</span>
  <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>
    <span class='m identifier id'>m</span> <span class='assign token'>=</span> <span class='receive identifier id'>receive</span>
    <span class='yield yield kw'>yield</span> <span class='m identifier id'>m</span> <span class='if if_mod kw'>if</span> <span class='m identifier id'>m</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Stomper constant id'>Stomper</span><span class='colon2 op'>::</span><span class='Frames constant id'>Frames</span><span class='colon2 op'>::</span><span class='Message constant id'>Message</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='subscription identifier id'>subscription</span><span class='dot token'>.</span><span class='accepts? fid id'>accepts?</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="first-instance_method">
  
    - (<tt>Object</tt>) <strong>first</strong>(n = 1) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='get-instance_method'>get</span>, <span id='gets-instance_method'>gets</span>, <span id='read-instance_method'>read</span></span>
    </span>
  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/open_uri_interface.rb', line 12</span>

<span class='def def kw'>def</span> <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='n identifier id'>n</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='received identifier id'>received</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span>
    <span class='received identifier id'>received</span> <span class='lshft op'>&lt;&lt;</span> <span class='m identifier id'>m</span>
    <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='received identifier id'>received</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='n identifier id'>n</span>
  <span class='end end kw'>end</span>
  <span class='n identifier id'>n</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span> <span class='received identifier id'>received</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='colon op'>:</span> <span class='received identifier id'>received</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="put-instance_method">
  
    - (<tt>Object</tt>) <strong>put</strong>(msg, headers = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='puts-instance_method'>puts</span></span>
    </span>
  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/open_uri_interface.rb', line 3</span>

<span class='def def kw'>def</span> <span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='default_destination identifier id'>default_destination</span><span class='comma token'>,</span> <span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:generate_content_length</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write-instance_method">
  
    - (<tt>Object</tt>) <strong>write</strong>(msg, headers = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/open_uri_interface.rb', line 8</span>

<span class='def def kw'>def</span> <span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='default_destination identifier id'>default_destination</span><span class='comma token'>,</span> <span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:generate_content_length</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Sep 27 14:53:34 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.7).
</div>

  </body>
</html>