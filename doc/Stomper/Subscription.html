<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Stomper::Subscription</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Stomper.html" title="Stomper (module)">Stomper</a></span></span>
     &raquo; 
    <span class="title">Subscription</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Stomper::Subscription
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Stomper::Subscription</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/stomper/subscription.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
A representation of a subscription to a stomp broker destination. The
attributes <tt>id</tt>, <tt>destination</tt>, <tt>ack</tt> and
<tt>selector</tt> have the same semantic meaning as the headers of a Stomp
&quot;SUBSCRIBE&quot; frame with the same name.
</p>


  </div>
</div>
<div class="tags">
  
</div>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ack-instance_method" title="#ack (instance method)">- (Object) <strong>ack</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute ack.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#destination-instance_method" title="#destination (instance method)">- (Object) <strong>destination</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute destination.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Object) <strong>id</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute id.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#selector-instance_method" title="#selector (instance method)">- (Object) <strong>selector</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute selector.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accepts%3F-instance_method" title="#accepts? (instance method)">- (Boolean) <strong>accepts?</strong>(message_frame) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if this subscription is responsible for a Stomper::Client
instance receiving <tt>message_frame</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Subscription) <strong>initialize</strong>(destination_or_options, subscription_id = nil, ack = nil, selector = nil, &amp;block) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a new Subscription instance from the given parameters.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#naive%3F-instance_method" title="#naive? (instance method)">- (Boolean) <strong>naive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if this subscription has no explicitly specified id, has no
selector specified, and acknowledges messages through the :auto mode.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#perform-instance_method" title="#perform (instance method)">- (Object) <strong>perform</strong>(message_frame) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Invokes the block associated with this subscription if this subscription
accepts the supplied <tt>message_frame</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#receives_for%3F-instance_method" title="#receives_for? (instance method)">- (Boolean) <strong>receives_for?</strong>(dest, subid = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if this subscription is responsible for receiving messages for
the given destination or subscription id, specified by <tt>dest</tt> and
<tt>subid</tt> respectively.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_subscribe-instance_method" title="#to_subscribe (instance method)">- (Object) <strong>to_subscribe</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Converts this representation of a subscription into a
Stomper::Frames::Subscribe client frame that can be transmitted to a stomp
broker through a Stomper::Connection instance.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_unsubscribe-instance_method" title="#to_unsubscribe (instance method)">- (Object) <strong>to_unsubscribe</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Converts this representation of a subscription into a
Stomper::Frames::Unsubscribe client frame that can be transmitted to a
stomp broker through a Stomper::Connection instance.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Stomper::Subscription (class)">Subscription</a></span></tt>) <strong>initialize</strong>(destination_or_options, subscription_id = nil, ack = nil, selector = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a new Subscription instance from the given parameters. The
<tt>destination_or_options</tt> parameter can either be a string
specification of the destination, such as &quot;/queue/target&quot;, or a
hash corresponding to the headers of a &quot;SUBSCRIBE&quot; frame (eg: {
:destination =&gt; &quot;/queue/target&quot;, :id =&gt;
&quot;sub-001&quot;, &#8230; })
</p>
<p>
The optional <tt>subscription_id</tt> parameter is a string corresponding
to the name of this subscription. If this parameter is specified, it should
be unique within the context of a given Stomper::Client, otherwise the
behavior of the Stomper::Client#unsubscribe method may have unintended
consequences.
</p>
<p>
The optional <tt>ack</tt> parameter specifies the mode that a client will
use to acknowledge received messages and may be either :client or :auto.
The default, :auto, does not require the client to notify the broker when
it has received a message; however, setting <tt>ack</tt> to :client will
require each message received by this subscription to be acknowledged
through the use of Stomper::Client#ack in order to ensure proper
interaction between client and broker.
</p>
<p>
The <tt>selector</tt> parameter (again, optional) sets a SQL 92 selector
for this subscription with the stomp broker as per the Stomp Protocol
specification. Support of this functionality is entirely the responsibility
of the broker, there is no client side filtering being done on incoming
messages.
</p>
<p>
When a message is &quot;received&quot; by an instance of Subscription, the
supplied <tt>block</tt> is inovked with the received message sent as a
parameter.
</p>
<p>
If no <tt>subscription_id</tt> is specified, either explicitly or through a
hash key of &#8216;id&#8217; in <tt>destination_or_options</tt>, one may be
automatically generated of the form <tt>sub-&amp;lt;Time.now.to_f&amp;gt;</tt>. The
automatic generation of a subscription id occurs if and only if naive?
returns false.
</p>
<p>
While direct creation of Subscription instances is possible, the preferred
method is for them to be constructed by a Stomper::Client through the use
of the Stomper::Client#subscribe method.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>See Also:</h3>
  <ul class="see">
    
      <li>naive?</li>
    
      <li><span class='object_link'><a href="Subscriber.html#subscribe-instance_method" title="Stomper::Subscriber#subscribe (method)">Stomper::Subscriber#subscribe</a></span></li>
    
      <li><span class='object_link'><a href="Subscriber.html#unsubscribe-instance_method" title="Stomper::Subscriber#unsubscribe (method)">Stomper::Subscriber#unsubscribe</a></span></li>
    
      <li><span class='object_link'><a href="Client.html#ack-instance_method" title="Stomper::Client#ack (method)">Client#ack</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 50</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='destination_or_options identifier id'>destination_or_options</span><span class='comma token'>,</span> <span class='subscription_id identifier id'>subscription_id</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='ack identifier id'>ack</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='selector identifier id'>selector</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='destination identifier id'>destination</span> <span class='assign token'>=</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='lbrack token'>[</span><span class='symbol val'>:destination</span><span class='rbrack token'>]</span>
    <span class='subscription_id identifier id'>subscription_id</span> <span class='opasgn op'>||=</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>
    <span class='ack identifier id'>ack</span> <span class='opasgn op'>||=</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='lbrack token'>[</span><span class='symbol val'>:ack</span><span class='rbrack token'>]</span>
    <span class='selector identifier id'>selector</span> <span class='opasgn op'>||=</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='lbrack token'>[</span><span class='symbol val'>:selector</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='destination identifier id'>destination</span> <span class='assign token'>=</span> <span class='destination_or_options identifier id'>destination_or_options</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
  <span class='@id ivar id'>@id</span> <span class='assign token'>=</span> <span class='subscription_id identifier id'>subscription_id</span>
  <span class='@destination ivar id'>@destination</span> <span class='assign token'>=</span> <span class='destination identifier id'>destination</span>
  <span class='@ack ivar id'>@ack</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='ack identifier id'>ack</span> <span class='orop op'>||</span> <span class='symbol val'>:auto</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  <span class='@selector ivar id'>@selector</span> <span class='assign token'>=</span> <span class='selector identifier id'>selector</span>
  <span class='@call_back ivar id'>@call_back</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
  <span class='@id ivar id'>@id</span> <span class='opasgn op'>||=</span> <span class='dstring node'>&quot;sub-#{Time.now.to_f}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='naive? fid id'>naive?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="ack-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="ack-instance_method">
  
    - (<tt>Object</tt>) <strong>ack</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute ack
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 7</span>

<span class='def def kw'>def</span> <span class='ack identifier id'>ack</span>
  <span class='@ack ivar id'>@ack</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="destination-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="destination-instance_method">
  
    - (<tt>Object</tt>) <strong>destination</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute destination
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 7</span>

<span class='def def kw'>def</span> <span class='destination identifier id'>destination</span>
  <span class='@destination ivar id'>@destination</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="id-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="id-instance_method">
  
    - (<tt>Object</tt>) <strong>id</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute id
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 7</span>

<span class='def def kw'>def</span> <span class='id identifier id'>id</span>
  <span class='@id ivar id'>@id</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="selector-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="selector-instance_method">
  
    - (<tt>Object</tt>) <strong>selector</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute selector
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 7</span>

<span class='def def kw'>def</span> <span class='selector identifier id'>selector</span>
  <span class='@selector ivar id'>@selector</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="accepts?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>accepts?</strong>(message_frame) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if this subscription is responsible for a Stomper::Client
instance receiving <tt>message_frame</tt>.
</p>
<p>
See also: receives_for?, perform
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 78</span>

<span class='def def kw'>def</span> <span class='accepts? fid id'>accepts?</span><span class='lparen token'>(</span><span class='message_frame identifier id'>message_frame</span><span class='rparen token'>)</span>
  <span class='receives_for? fid id'>receives_for?</span><span class='lparen token'>(</span><span class='message_frame identifier id'>message_frame</span><span class='dot token'>.</span><span class='destination identifier id'>destination</span><span class='comma token'>,</span> <span class='message_frame identifier id'>message_frame</span><span class='dot token'>.</span><span class='subscription identifier id'>subscription</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="naive?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>naive?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if this subscription has no explicitly specified id, has no
selector specified, and acknowledges messages through the :auto mode.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 70</span>

<span class='def def kw'>def</span> <span class='naive? fid id'>naive?</span>
  <span class='@id ivar id'>@id</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='@selector ivar id'>@selector</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='@ack ivar id'>@ack</span> <span class='eq op'>==</span> <span class='symbol val'>:auto</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="perform-instance_method">
  
    - (<tt>Object</tt>) <strong>perform</strong>(message_frame) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Invokes the block associated with this subscription if this subscription
accepts the supplied <tt>message_frame</tt>.
</p>
<p>
See also: accepts?
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 105</span>

<span class='def def kw'>def</span> <span class='perform identifier id'>perform</span><span class='lparen token'>(</span><span class='message_frame identifier id'>message_frame</span><span class='rparen token'>)</span>
  <span class='@call_back ivar id'>@call_back</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='message_frame identifier id'>message_frame</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='accepts? fid id'>accepts?</span><span class='lparen token'>(</span><span class='message_frame identifier id'>message_frame</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="receives_for?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>receives_for?</strong>(dest, subid = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if this subscription is responsible for receiving messages for
the given destination or subscription id, specified by <tt>dest</tt> and
<tt>subid</tt> respectively.
</p>
<p>
Note: if <tt>subid</tt> is non-nil or this subscription is not naive?, then
this method returns true if and only if the supplied <tt>subid</tt> is
equal to the <tt>id</tt> of this subscription. Otherwise, the return value
depends only upon the equality of <tt>dest</tt> and this subscriptions
<tt>destination</tt> attribute.
</p>
<p>
See also: naive?
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 93</span>

<span class='def def kw'>def</span> <span class='receives_for? fid id'>receives_for?</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='subid identifier id'>subid</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='naive? fid id'>naive?</span> <span class='andop op'>&amp;&amp;</span> <span class='subid identifier id'>subid</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='@destination ivar id'>@destination</span> <span class='eq op'>==</span> <span class='dest identifier id'>dest</span>
  <span class='else else kw'>else</span>
    <span class='@id ivar id'>@id</span> <span class='eq op'>==</span> <span class='subid identifier id'>subid</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_subscribe-instance_method">
  
    - (<tt>Object</tt>) <strong>to_subscribe</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Converts this representation of a subscription into a
Stomper::Frames::Subscribe client frame that can be transmitted to a stomp
broker through a Stomper::Connection instance.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 112</span>

<span class='def def kw'>def</span> <span class='to_subscribe identifier id'>to_subscribe</span>
  <span class='headers identifier id'>headers</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:destination</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@destination ivar id'>@destination</span><span class='comma token'>,</span> <span class='symbol val'>:ack</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@ack ivar id'>@ack</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='rbrace token'>}</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@id ivar id'>@id</span> <span class='unless unless_mod kw'>unless</span> <span class='@id ivar id'>@id</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='symbol val'>:selector</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@selector ivar id'>@selector</span> <span class='unless unless_mod kw'>unless</span> <span class='@selector ivar id'>@selector</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='Stomper constant id'>Stomper</span><span class='colon2 op'>::</span><span class='Frames constant id'>Frames</span><span class='colon2 op'>::</span><span class='Subscribe constant id'>Subscribe</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@destination ivar id'>@destination</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_unsubscribe-instance_method">
  
    - (<tt>Object</tt>) <strong>to_unsubscribe</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Converts this representation of a subscription into a
Stomper::Frames::Unsubscribe client frame that can be transmitted to a
stomp broker through a Stomper::Connection instance.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/stomper/subscription.rb', line 122</span>

<span class='def def kw'>def</span> <span class='to_unsubscribe identifier id'>to_unsubscribe</span>
  <span class='headers identifier id'>headers</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:destination</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@destination ivar id'>@destination</span> <span class='rbrace token'>}</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@id ivar id'>@id</span> <span class='unless unless_mod kw'>unless</span> <span class='@id ivar id'>@id</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='Stomper constant id'>Stomper</span><span class='colon2 op'>::</span><span class='Frames constant id'>Frames</span><span class='colon2 op'>::</span><span class='Unsubscribe constant id'>Unsubscribe</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@destination ivar id'>@destination</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Sep 27 14:53:36 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.7).
</div>

  </body>
</html>